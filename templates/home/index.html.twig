{% extends 'base.html.twig' %}

{% block title %}Bienvenue sur la BibliothÃ¨que
{% endblock %}

{% block body %}
	<img class="background" src="https://www.bnf.fr/sites/default/files/styles/header_big_height/public/2021-11/jardin_fm_automne.jpg" alt="Aleq">
	<div class="container mt-4 mb-4">
		<div class="container-fluid topkek">
			<div class="row">
				<div class="col-12 text-center">
					<div class="bg-custom rounded p-3" style="max-width: 50%; margin: auto;">
						<h1 class="text-grey">Bienvenue dans le hub</h1>
						<h4 class="text-yellow">Voici la liste des livres</h4>
					</div>
				</div>
			</div>
		</div>
		<div class="container mt-4">
    <div class="row">
        <div class="col-md-3">
        <form id="filterForm" method="get" action="{{ path('home_route') }}">
  <select class="form-select" name="author" id="authorTri" onchange="document.getElementById('filterForm').submit();">
        <option value="none" selected disabled hidden>-- Please choose an option --</option>
           {% for auteur in auteurs %}
            <option value="{{ auteur.Auteur }}">{{ auteur.Auteur }}</option>
        {% endfor %}
    </select>
        </div>
        <div class="col-md-3">
            <select class="form-select" name="category" id="categoryTri" onchange="document.getElementById('filterForm').submit();">
                <option value="none" selected disabled hidden>-- Please choose an option --</option>
				    {% for categorie in categories %}
            <option value="{{ categorie.Categorie }}">{{ categorie.Categorie }}</option>
        {% endfor %}
            </select>
        </div>
        <div class="col-md-3">
            <select class="form-select" name="date" id="dateTri" onchange="document.getElementById('filterForm').submit();">
                <option value="none" selected disabled hidden>-- Please choose an option --</option>
				  {% for date in dates %}
    <option value="{{ date.Date_de_Paruption }}">{{ date.Date_de_Paruption }}</option>
{% endfor %}
            </select>
        </div>
        <div class="col-md-3">
            <select class="form-select" name="titre" id="titreTri" onchange="document.getElementById('filterForm').submit();">
                <option value="none" selected disabled hidden>-- Please choose an option --</option>
					    {% for titre in titres %}
            <option value="{{ titre.Titre }}">{{ titre.Titre }}</option>
        {% endfor %}
            </select>
        </div>
   <div class="row mt-3">
        <div class="col text-center">
            <button type="button" id="resetFilter" class="btn btn-secondary btn-md">Reset Filters</button>
        </div>
    </div>
        </form>
    </div>
    
</div>
		<br><br>
		<div class="row row-cols-1 row-cols-md-3">
       
{% for livre in livres %}
    <div class="col mb-4 livre" data-auteur="{{ livre.auteur }}" data-categorie="{{ livre.categorie }}" data-date="{{ livre.datedeparuption }}" data-titre="{{ livre.titre }}">
        <div class="card bg-custom">
            <a href="{{ path('details_livre', {'id': livre.id}) }}" class="text-decoration-none text-dark d-block position-relative">
                {% if livre.ImageName is not null %}
                    <img src="{{ asset('img/CouvertureLivres/' ~ livre.ImageName) }}" class="card-img-top" alt="{{ livre.titre }}" style="width: 100%; height: 100%;">
                {% endif %}
                <div class="overlay position-absolute top-0 start-0 w-100 h-100" style="background-color: rgba(204, 187, 241, 0); transition: background-color 0.3s ease-in-out;"></div>
                <div class="card-body">
                    <h5 class="card-title text-center">
                        {{ livre.titre }}
                    </h5>
                    <p class="card-text text-center">{{ livre.auteur }}</p>
                    <p class="card-text">{% if livre.statut == 1 %}ðŸ”´ EmpruntÃ© {% else %}âœ… Disponible {% endif %}</p>
                </div>
            </a>
        </div>
    </div>
{% endfor %}
		</div>
	</div>

{# Afficher la pagination #}
<div class="pagination">
    {{ knp_pagination_render(livres) }}
</div>
	<script src="{{ asset('js/triLivres.js') }}"></script>
{% endblock %}